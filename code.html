import React, { useState, useEffect, useMemo } from 'react';
import { 
  Activity, Bell, Shield, Zap, Server, Cpu, Settings, LogOut, 
  ExternalLink, Copy, Plus, Trash2, CheckCircle, Database, 
  Play, Pause, User, Search, Globe, Terminal, Eye, ChevronDown, 
  ChevronUp, Map as MapIcon, ShieldCheck, RefreshCw, Clock,
  ToggleLeft, ToggleRight, Wifi, WifiOff, Filter, Target, Radar
} from 'lucide-react';

const App = () => {
  const [activeTab, setActiveTab] = useState('dashboard');
  const [isPaused, setIsPaused] = useState(false);
  const [showLogs, setShowLogs] = useState(true);
  
  // Simulation des 50 bots
  const [botInstances, setBotInstances] = useState(
    Array.from({ length: 50 }, (_, i) => ({
      id: i + 1,
      isOnline: i < 42,
      ram: 20 + Math.random() * 40,
      cpu: 10 + Math.random() * 50,
      jobs: Math.floor(Math.random() * 1000),
      region: ['US-EAST', 'EU-WEST', 'ASIA-SOUTH', 'LATAM'][Math.floor(Math.random()*4)]
    }))
  );

  const onlineCount = useMemo(() => botInstances.filter(b => b.isOnline).length, [botInstances]);

  // √âtats pour les stats globales anim√©es
  const [globalStats, setGlobalStats] = useState({ scanRate: 0, cpuLoad: 0, latency: 24 });

  // Logs et Alertes
  const [logs, setLogs] = useState([
    { id: 1, text: "Cluster v4.2.0 initialis√©.", type: "sys" },
    { id: 2, text: "Authentification API r√©ussie.", type: "sys" }
  ]);

  const [alerts, setAlerts] = useState([
    { id: 1, value: "15.5B", name: "Strawberry Elephant", owner: "Admin_Lover", type: "OG", server: "f2a1-x9z2", status: "Old" },
    { id: 2, value: "8.2B", name: "Cocofanto Elefanto", owner: "RizzGod", type: "Brainrot God", server: "k9l0-p1m2", status: "Old" },
  ]);

  // Webhooks state (Fixing the ReferenceError)
  const [webhooks, setWebhooks] = useState([
    { id: 1, name: "Discord Main", url: "https://discord.com/api/webhooks/...", events: "CRITICAL_OG, MYTHIC" },
    { id: 2, name: "Telegram Alert", url: "https://api.telegram.org/bot...", events: "ALL_SCANS" }
  ]);

  // Donn√©es de la heatmap (radar)
  const [radarHits, setRadarHits] = useState([]);

  const BRAINROT_DATA = [
    { name: "Strawberry Elephant", type: "OG" },
    { name: "Meowl", type: "OG" },
    { name: "Cocofanto Elefanto", type: "Brainrot God" },
    { name: "Pop Pop Sahur", type: "Brainrot God" },
    { name: "La Vacca Saturno", type: "Secret" },
    { name: "Dragon Gingerini", type: "Secret" },
    { name: "Frigo Camelo", type: "Mythic" },
    { name: "Tree Tree Tree Sahur", type: "Mythic" }
  ];

  // Boucle de vie (Stats & Mouvements)
  useEffect(() => {
    if (isPaused || onlineCount === 0) return;
    const interval = setInterval(() => {
      // 1. Update bots stats
      setBotInstances(prev => prev.map(bot => {
        if (!bot.isOnline) return bot;
        return {
          ...bot,
          ram: Math.min(98, Math.max(5, bot.ram + (Math.random() - 0.5) * 6)),
          cpu: Math.min(99, Math.max(5, bot.cpu + (Math.random() - 0.5) * 12)),
          jobs: bot.jobs + (Math.random() > 0.8 ? 1 : 0)
        };
      }));

      // 2. Update Global Stats
      setGlobalStats({
        scanRate: Math.floor(onlineCount * (28 + Math.random() * 5)),
        cpuLoad: (onlineCount * 1.4 + Math.random() * 8).toFixed(1),
        latency: Math.floor(20 + Math.random() * 15)
      });

      // 3. New log
      if (Math.random() > 0.4) {
        const activeBots = botInstances.filter(b => b.isOnline);
        if (activeBots.length > 0) {
          const randomBot = activeBots[Math.floor(Math.random() * activeBots.length)];
          const newLog = { 
            id: Date.now() + Math.random(), 
            text: `Instance #${randomBot.id.toString().padStart(2, '0')}: Scan compl√©t√© sur ${Math.random().toString(36).substring(7)}`,
            type: "scan"
          };
          setLogs(prev => [newLog, ...prev].slice(0, 50));
        }
      }

      // 4. New Alert & Radar Hit
      if (Math.random() > 0.85) {
        const item = BRAINROT_DATA[Math.floor(Math.random() * BRAINROT_DATA.length)];
        const newHit = {
          id: Date.now() + Math.random(),
          name: item.name,
          type: item.type,
          x: 20 + Math.random() * 60,
          y: 20 + Math.random() * 60,
          opacity: 1
        };
        
        setRadarHits(prev => [newHit, ...prev].slice(0, 5));
        
        const newAlert = {
          id: Date.now() + Math.random(),
          value: (Math.random() * 10 + 5).toFixed(1) + "B",
          name: item.name,
          type: item.type,
          owner: "User_" + Math.floor(Math.random()*999),
          server: Math.random().toString(36).substring(7),
          status: "New"
        };
        setAlerts(prev => [newAlert, ...prev].slice(0, 10));
      }
    }, 1500);
    return () => clearInterval(interval);
  }, [isPaused, onlineCount, botInstances]);

  const toggleBot = (id) => {
    setBotInstances(prev => prev.map(b => b.id === id ? {...b, isOnline: !b.isOnline} : b));
    const bot = botInstances.find(b => b.id === id);
    const logEntry = {id: Date.now() + Math.random(), text: `Bot #${id} est maintenant ${!bot.isOnline ? 'EN LIGNE' : 'HORS LIGNE'}`, type: "sys"};
    setLogs(prev => [logEntry, ...prev]);
  };

  const copyToClipboard = (text) => {
    const el = document.createElement('textarea');
    el.value = text;
    document.body.appendChild(el);
    el.select();
    document.execCommand('copy');
    document.body.removeChild(el);
  };

  return (
    <div className="min-h-screen bg-[#0b0e14] text-slate-200 font-sans select-none overflow-hidden">
      {/* Sidebar */}
      <aside className="fixed left-0 top-0 h-full w-20 md:w-64 bg-[#0f121a] border-r border-white/5 flex flex-col py-6 px-4 z-50 shadow-2xl">
        <div className="flex items-center gap-3 mb-10 px-2">
          <div className="bg-blue-600 p-2 rounded-xl shadow-lg shadow-blue-600/30">
            <Zap className="text-white fill-current" size={24} />
          </div>
          <span className="text-xl font-black hidden md:block text-white italic tracking-tighter uppercase">Cluster Scan</span>
        </div>
        <nav className="flex-1 w-full space-y-1">
          <NavItem icon={<Activity size={20}/>} label="Dashboard" active={activeTab === 'dashboard'} onClick={() => setActiveTab('dashboard')} />
          <NavItem icon={<Server size={20}/>} label="Bots Cluster" active={activeTab === 'bots'} onClick={() => setActiveTab('bots')} />
          <NavItem icon={<Radar size={20}/>} label="Radar Map" active={activeTab === 'heatmap'} onClick={() => setActiveTab('heatmap')} />
          <NavItem icon={<Bell size={20}/>} label="Webhooks" active={activeTab === 'webhooks'} onClick={() => setActiveTab('webhooks')} />
          <NavItem icon={<Database size={20}/>} label="Archives" active={activeTab === 'logs'} onClick={() => setActiveTab('logs')} />
          <NavItem icon={<Settings size={20}/>} label="Configuration" active={activeTab === 'settings'} onClick={() => setActiveTab('settings')} />
        </nav>
        <div className="pt-6 border-t border-white/5 mt-4">
           <NavItem icon={<LogOut size={20}/>} label="Logout" color="text-red-400/70" onClick={() => {}} />
        </div>
      </aside>

      {/* Main content */}
      <main className="pl-20 md:pl-64 pt-6 pb-40 px-4 md:px-10 h-screen overflow-y-auto">
        <header className="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4">
          <div>
            <h2 className="text-2xl font-black text-white tracking-tight uppercase flex items-center gap-3">
               {activeTab}
               {onlineCount > 0 && !isPaused && <div className="w-2 h-2 bg-green-500 rounded-full animate-pulse shadow-[0_0_10px_#22c55e]" />}
            </h2>
            <p className="text-slate-500 text-[10px] font-mono tracking-widest uppercase">Node: CLUSTER-ALPHA-09</p>
          </div>
          <div className="flex gap-2">
            <button onClick={() => setIsPaused(!isPaused)} className={`flex items-center gap-2 px-6 py-2 rounded-xl font-black text-[10px] uppercase transition-all border shadow-lg ${isPaused ? 'bg-yellow-500/10 border-yellow-500/30 text-yellow-500' : 'bg-green-600 text-white border-green-500'}`}>
              {isPaused ? <Play size={14} fill="currentColor"/> : <Pause size={14} fill="currentColor"/>}
              {isPaused ? 'Resume Scan' : 'Scanning Live'}
            </button>
          </div>
        </header>

        {/* Dashboard Tab */}
        {activeTab === 'dashboard' && (
          <>
            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
              <StatCard title="Online" value={onlineCount} icon={<Cpu className="text-blue-400"/>} sub={`Sur ${botInstances.length} total`} />
              <StatCard title="Scans/min" value={isPaused ? 0 : globalStats.scanRate} icon={<Globe className="text-purple-400"/>} sub="D√©bit cluster" />
              <StatCard title="Latence" value={`${globalStats.latency}ms`} icon={<Zap className="text-yellow-400"/>} sub="Stable" />
              <StatCard title="CPU Load" value={isPaused ? "2.1%" : `${globalStats.cpuLoad}%`} icon={<Server className="text-green-400"/>} sub="Charge syst√®me" />
            </div>

            <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
              <div className="lg:col-span-2 space-y-6">
                <div className="bg-[#141822] border border-white/5 rounded-3xl overflow-hidden shadow-2xl">
                  <div className="p-6 border-b border-white/5 bg-white/[0.01] flex justify-between items-center">
                      <h3 className="font-bold flex items-center gap-2 text-sm uppercase tracking-wider text-slate-300">
                          <Eye size={16} className="text-blue-400" /> D√©tections Critiques
                      </h3>
                      <div className="text-[10px] text-slate-500 bg-white/5 px-2 py-1 rounded italic font-mono">Real-time Hook active</div>
                  </div>
                  <div className="overflow-x-auto">
                    <table className="w-full text-left">
                      <thead className="text-[10px] text-slate-500 uppercase tracking-widest bg-white/[0.01]">
                        <tr>
                          <th className="px-6 py-4">Brainrot Item</th>
                          <th className="px-6 py-4">D√©tenteur</th>
                          <th className="px-6 py-4">Estimation</th>
                          <th className="px-6 py-4 text-right">Action</th>
                        </tr>
                      </thead>
                      <tbody className="divide-y divide-white/5">
                        {alerts.map(a => (
                          <tr key={a.id} className="group hover:bg-white/[0.02] transition-all">
                            <td className="px-6 py-4">
                              <div className="font-bold text-white text-sm">{a.name}</div>
                              <div className="text-[10px] text-slate-600 font-mono">NODE: {a.server}</div>
                            </td>
                            <td className="px-6 py-4 text-sm text-slate-400 italic">@{a.owner}</td>
                            <td className="px-6 py-4">
                              <div className={`font-black ${a.type === 'OG' ? 'text-red-500' : 'text-orange-500'}`}>{a.value}</div>
                              <div className="text-[10px] font-bold opacity-50 uppercase tracking-tighter">{a.type} Detected</div>
                            </td>
                            <td className="px-6 py-4">
                               <div className="flex justify-end gap-2 opacity-60 group-hover:opacity-100">
                                  <button onClick={() => copyToClipboard(a.server)} className="p-2 bg-white/5 rounded-lg hover:text-white"><Copy size={14}/></button>
                                  <button className="p-2 bg-blue-600/20 text-blue-400 rounded-lg hover:bg-blue-600 hover:text-white transition-all"><ExternalLink size={14}/></button>
                               </div>
                            </td>
                          </tr>
                        ))}
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              
              <div className="space-y-6">
                <div className="bg-gradient-to-br from-blue-600 to-indigo-700 rounded-3xl p-6 shadow-2xl relative overflow-hidden group">
                    <div className="absolute -right-4 -top-4 opacity-10 group-hover:scale-110 transition-transform">
                        <ShieldCheck size={120} />
                    </div>
                    <div className="relative z-10">
                      <h3 className="text-xl font-black text-white mb-1 tracking-tight italic">MODE ALPHA-SCAN</h3>
                      <p className="text-blue-100 text-[10px] opacity-70 mb-6 uppercase font-bold tracking-widest">Premium Access Granted</p>
                      <div className="space-y-3 mb-6">
                         <div className="flex items-center gap-2 text-[10px] text-white font-bold uppercase tracking-widest"><CheckCircle size={12} className="text-blue-200"/> 50 Independent Threads</div>
                         <div className="flex items-center gap-2 text-[10px] text-white font-bold uppercase tracking-widest"><CheckCircle size={12} className="text-blue-200"/> Spectral Radar v2</div>
                         <div className="flex items-center gap-2 text-[10px] text-white font-bold uppercase tracking-widest"><CheckCircle size={12} className="text-blue-200"/> Advanced Log Archive</div>
                      </div>
                      <button className="w-full py-3 bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white border border-white/20 rounded-2xl font-black text-[10px] uppercase tracking-widest transition-all">
                        Upgrade Tier
                      </button>
                    </div>
                </div>
                
                <div className="bg-[#141822] border border-white/5 rounded-3xl p-6 relative overflow-hidden">
                   <div className="flex justify-between items-center mb-4">
                      <h3 className="text-[10px] font-black text-slate-500 uppercase tracking-widest">Discord Webhook</h3>
                      <div className="w-2 h-2 bg-green-500 rounded-full animate-pulse" />
                   </div>
                   <div className="bg-[#2b2d31] rounded-xl p-4 border-l-4 border-blue-500 shadow-xl">
                      <div className="flex items-center gap-2 mb-2">
                        <div className="w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center text-[8px] font-bold text-white italic">B</div>
                        <span className="text-[10px] font-black text-white tracking-tighter">BRAINROT-BOT <span className="text-slate-500 font-normal">BOT</span></span>
                      </div>
                      <div className="text-[10px] font-bold text-blue-300 mb-1">üö® CRITICAL_OG_FOUND</div>
                      <p className="text-[10px] text-slate-400 font-mono">Item: Strawberry Elephant</p>
                      <div className="mt-3 py-1.5 bg-indigo-600/20 border border-indigo-500/30 rounded flex items-center justify-center text-[8px] font-black text-indigo-400 uppercase cursor-pointer hover:bg-indigo-600 hover:text-white transition-all">
                         View on Server
                      </div>
                   </div>
                </div>
              </div>
            </div>
          </>
        )}

        {/* Bots Cluster Tab */}
        {activeTab === 'bots' && (
          <div className="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 animate-in fade-in duration-500 pb-20">
             {botInstances.map((bot) => (
                <div key={bot.id} className={`bg-[#141822] border rounded-2xl p-4 transition-all duration-300 ${bot.isOnline ? 'border-white/5 shadow-lg' : 'border-red-900/10 opacity-30 grayscale'}`}>
                    <div className="flex justify-between items-center mb-4">
                        <div className="flex items-center gap-2">
                            <div className={`w-8 h-8 rounded-lg flex items-center justify-center transition-all ${bot.isOnline ? 'bg-blue-500/10 text-blue-400' : 'bg-slate-800 text-slate-500'}`}>
                                <Cpu size={14} className={bot.isOnline ? 'animate-pulse' : ''} />
                            </div>
                            <span className="text-xs font-bold text-white tracking-tighter">NODE-{bot.id.toString().padStart(2, '0')}</span>
                        </div>
                        <button onClick={() => toggleBot(bot.id)} className={`transition-colors outline-none ${bot.isOnline ? 'text-blue-500' : 'text-slate-700'}`}>
                           {bot.isOnline ? <ToggleRight size={28} /> : <ToggleLeft size={28} />}
                        </button>
                    </div>
                    <div className="space-y-3">
                        <BotBar label="RAM" val={bot.ram} color="bg-blue-500" />
                        <BotBar label="CPU" val={bot.cpu} color="bg-indigo-500" />
                        <div className="flex justify-between text-[8px] font-black text-slate-600 uppercase pt-1 font-mono tracking-tighter">
                            <span>Tasks: {bot.jobs}</span>
                            <span className={bot.isOnline ? 'text-blue-400/60' : ''}>{bot.region}</span>
                        </div>
                    </div>
                </div>
             ))}
          </div>
        )}

        {/* Radar Map Tab */}
        {activeTab === 'heatmap' && (
          <div className="bg-[#141822] border border-white/5 rounded-3xl p-8 min-h-[600px] relative overflow-hidden animate-in zoom-in duration-700 flex flex-col items-center justify-center">
              <div className="absolute top-8 left-8">
                  <h3 className="font-black text-xl text-white uppercase italic tracking-tighter">Spectral Radar v2</h3>
                  <p className="text-[10px] text-slate-500 font-bold uppercase tracking-[0.3em]">D√©tection d'objets de valeur</p>
              </div>

              <div className="relative w-[450px] h-[450px] flex items-center justify-center">
                  <div className="absolute inset-0 border border-white/5 rounded-full" />
                  <div className="absolute inset-12 border border-white/5 rounded-full" />
                  <div className="absolute inset-24 border border-white/10 rounded-full" />
                  <div className="absolute inset-36 border border-white/5 rounded-full" />
                  
                  {!isPaused && (
                      <div className="absolute w-full h-full rounded-full animate-spin-slow" style={{ background: 'conic-gradient(from 0deg, transparent 80%, rgba(59, 130, 246, 0.2) 100%)' }} />
                  )}

                  <div className="absolute w-full h-[1px] bg-white/5" />
                  <div className="absolute h-full w-[1px] bg-white/5" />

                  {radarHits.map((hit) => (
                      <div key={hit.id} className="absolute transition-all duration-1000 flex flex-col items-center" style={{ left: `${hit.x}%`, top: `${hit.y}%` }}>
                          <div className="w-2 h-2 bg-red-500 rounded-full animate-ping mb-1" />
                          <div className="bg-red-500/90 text-white text-[8px] font-black px-1.5 py-0.5 rounded uppercase tracking-tighter shadow-lg shadow-red-900/40">
                             {hit.name}
                          </div>
                      </div>
                  ))}

                  <div className="absolute inset-0 flex items-center justify-center opacity-20 pointer-events-none">
                      <Target size={400} strokeWidth={0.5} className="text-blue-500" />
                  </div>
              </div>

              <div className="mt-8 flex gap-8">
                  <div className="flex items-center gap-2"><div className="w-2 h-2 bg-blue-500 rounded-full"></div><span className="text-[9px] font-black text-slate-500 uppercase tracking-widest">Active Scan</span></div>
                  <div className="flex items-center gap-2"><div className="w-2 h-2 bg-red-500 rounded-full animate-pulse"></div><span className="text-[9px] font-black text-slate-500 uppercase tracking-widest">Valuable Found</span></div>
              </div>
          </div>
        )}

        {/* Webhooks Tab */}
        {activeTab === 'webhooks' && (
          <div className="space-y-6 animate-in fade-in duration-500 max-w-4xl">
             <div className="flex justify-between items-center mb-4">
                <h3 className="font-black text-white uppercase tracking-widest text-sm italic">Connecteurs de sortie</h3>
                <button className="bg-blue-600 hover:bg-blue-700 text-white px-5 py-2.5 rounded-xl text-[10px] font-black uppercase flex items-center gap-2 shadow-lg shadow-blue-900/20 transition-all active:scale-95">
                   <Plus size={14}/> Add Webhook
                </button>
             </div>
             <div className="grid grid-cols-1 gap-4">
                {webhooks.map(w => (
                  <div key={w.id} className="bg-[#141822] border border-white/5 p-6 rounded-3xl flex justify-between items-center hover:bg-white/[0.02] transition-colors">
                      <div className="flex items-center gap-5">
                         <div className="p-4 bg-blue-500/10 text-blue-400 rounded-2xl"><Bell size={24}/></div>
                         <div>
                            <div className="flex items-center gap-3">
                                <h4 className="font-bold text-white text-base">{w.name}</h4>
                                <span className="bg-green-500/10 text-green-500 text-[8px] px-2 py-0.5 rounded font-black uppercase border border-green-500/20">Active</span>
                            </div>
                            <p className="text-[10px] text-slate-500 font-mono mt-1 opacity-60">URL: {w.url}</p>
                         </div>
                      </div>
                      <div className="flex items-center gap-6">
                         <div className="text-right hidden sm:block">
                            <div className="text-[9px] font-black text-slate-500 uppercase tracking-[0.2em] mb-1">Filter Pattern</div>
                            <div className="text-xs text-blue-400 font-bold">{w.events}</div>
                         </div>
                         <div className="flex gap-2">
                             <button className="p-2 text-slate-500 hover:text-white transition-colors"><Settings size={18}/></button>
                             <button className="p-2 text-slate-600 hover:text-red-500 transition-colors"><Trash2 size={18}/></button>
                         </div>
                      </div>
                  </div>
                ))}
             </div>
          </div>
        )}

        {/* Logs Archives Tab */}
        {activeTab === 'logs' && (
           <div className="bg-[#141822] border border-white/5 rounded-3xl flex flex-col h-[650px] animate-in fade-in duration-500 overflow-hidden shadow-2xl">
              <div className="p-5 border-b border-white/5 flex justify-between items-center bg-white/[0.01]">
                 <div className="flex items-center gap-3">
                    <Database size={16} className="text-blue-500" />
                    <span className="text-xs font-black text-white uppercase tracking-widest">Master Logs System</span>
                 </div>
                 <div className="flex gap-3">
                    <button className="text-[10px] px-4 py-1.5 bg-blue-600/10 text-blue-400 rounded-lg font-bold uppercase border border-blue-500/20">Export CSV</button>
                    <button className="text-[10px] px-4 py-1.5 bg-white/5 text-slate-500 rounded-lg font-bold uppercase hover:text-white">Clear</button>
                 </div>
              </div>
              <div className="flex-1 overflow-y-auto p-6 font-mono text-[11px] space-y-3 bg-[#0b0e14]/50">
                 {logs.map((log) => (
                    <div key={log.id} className="flex gap-4 border-b border-white/[0.02] pb-2 group">
                       <span className="text-slate-600 min-w-[140px] font-bold">[{new Date(log.id).toLocaleTimeString()}]</span>
                       <span className="text-blue-500/80 font-black uppercase text-[9px] min-w-[100px] tracking-tighter">[{log.type.toUpperCase()}]</span>
                       <span className="text-slate-400 italic flex-1 group-hover:text-slate-200 transition-colors">
                          {log.text}
                       </span>
                    </div>
                 ))}
              </div>
           </div>
        )}

        {/* Settings Tab */}
        {activeTab === 'settings' && (
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-8 animate-in slide-in-from-bottom-4 duration-500 max-w-6xl">
             <div className="bg-[#141822] border border-white/5 p-8 rounded-3xl space-y-8 shadow-xl">
                <div>
                   <div className="flex items-center gap-3 mb-6">
                        <Target size={20} className="text-blue-500" />
                        <h3 className="font-black text-white uppercase tracking-widest text-sm">Param√®tres de Scan</h3>
                   </div>
                   <div className="space-y-6">
                      <SettingInput label="Seuil de d√©tection OG (Billions)" value="1.5" />
                      <SettingInput label="Buffer de d√©tection (ms)" value="250" />
                      <SettingToggle label="Alerte Sonore Haute-Priorit√©" active={true} />
                      <SettingToggle label="Auto-Rizz Protocol v4" active={false} />
                   </div>
                </div>
                <div className="pt-6 border-t border-white/5">
                   <h3 className="font-black text-slate-500 text-[10px] uppercase tracking-widest mb-6 italic">Fr√©quence de rafra√Æchissement</h3>
                   <div className="flex items-center gap-6">
                      <input type="range" className="flex-1 accent-blue-600 h-1 bg-white/5 rounded-full appearance-none cursor-pointer" />
                      <span className="text-[10px] font-black text-blue-400 uppercase w-24 text-right">Aggressif (0.5s)</span>
                   </div>
                </div>
             </div>
             
             <div className="bg-[#141822] border border-white/5 p-8 rounded-3xl flex flex-col justify-between shadow-xl">
                <div>
                   <div className="flex items-center gap-3 mb-6">
                        <Shield size={20} className="text-blue-500" />
                        <h3 className="font-black text-white uppercase tracking-widest text-sm">S√©curit√© & API</h3>
                   </div>
                   <div className="space-y-6">
                      <div className="p-5 bg-white/5 rounded-2xl border border-white/5 group hover:border-blue-500/30 transition-all">
                         <div className="text-[10px] font-bold text-slate-500 uppercase mb-3 flex justify-between">
                            <span>Main API Cluster Key</span>
                            <span className="text-blue-500">Connected</span>
                         </div>
                         <div className="flex justify-between items-center bg-black/20 p-3 rounded-lg">
                            <span className="text-xs font-mono text-white tracking-widest">‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ 98XZ</span>
                            <button className="text-slate-500 hover:text-white transition-colors"><Eye size={16}/></button>
                         </div>
                      </div>
                   </div>
                </div>
                <div className="flex gap-4 mt-10">
                   <button className="flex-1 py-4 bg-red-600/5 text-red-500 rounded-2xl font-black text-[10px] uppercase border border-red-500/20 hover:bg-red-600 hover:text-white transition-all">Reset Database</button>
                   <button className="flex-1 py-4 bg-blue-600 text-white rounded-2xl font-black text-[10px] uppercase shadow-lg shadow-blue-900/40 hover:bg-blue-500 transition-all">Save Config</button>
                </div>
             </div>
          </div>
        )}

        {/* PERSISTENT TERMINAL */}
        <div className={`fixed bottom-0 left-20 md:left-64 right-0 z-40 transition-all duration-300 ${showLogs ? 'h-64' : 'h-10'}`}>
            <div className="bg-[#0f121a] border-t border-white/10 h-full flex flex-col shadow-[0_-20px_50px_rgba(0,0,0,0.5)]">
                <div 
                    onClick={() => setShowLogs(!showLogs)} 
                    className="bg-[#141822] px-6 py-2 flex justify-between items-center cursor-pointer border-b border-white/5 hover:bg-white/[0.04] transition-colors"
                >
                    <div className="flex items-center gap-3">
                        <Terminal size={14} className="text-blue-400" />
                        <span className="text-[10px] font-black text-slate-400 tracking-[0.2em] uppercase">Node Output :: online_nodes={onlineCount} stats_sync=ok</span>
                    </div>
                    <div className="flex items-center gap-4 text-slate-500 font-mono">
                        <span className="text-[9px] uppercase italic text-blue-500/80">{isPaused ? 'CLUSTER_PAUSED' : 'SCAN_IN_PROGRESS'}</span>
                        {showLogs ? <ChevronDown size={14}/> : <ChevronUp size={14}/>}
                    </div>
                </div>
                {showLogs && (
                    <div className="flex-1 p-5 font-mono text-[10px] overflow-y-auto space-y-1.5 bg-[#0b0e14]">
                        {logs.map(log => (
                            <div key={log.id} className="flex gap-4 animate-in slide-in-from-left-2 duration-200">
                                <span className="text-slate-600">[{new Date(log.id).toLocaleTimeString()}]</span>
                                <span className={log.type === 'sys' ? 'text-blue-400 font-bold' : 'text-slate-400'}>
                                    {log.type === 'sys' ? '>> CLUSTER:' : '> SCAN:'} {log.text}
                                </span>
                            </div>
                        ))}
                    </div>
                )}
            </div>
        </div>
      </main>

      <style>{`
        @keyframes spin-slow { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .animate-spin-slow { animation: spin-slow 8s linear infinite; }
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #1e293b; border-radius: 10px; }
      `}</style>
    </div>
  );
};

// Sub-components
const BotBar = ({ label, val, color }) => (
    <div className="space-y-1">
        <div className="flex justify-between text-[8px] text-slate-500 uppercase font-black tracking-tighter">
            <span>{label}</span>
            <span className="text-white">{Math.floor(val)}%</span>
        </div>
        <div className="w-full h-1 bg-white/5 rounded-full overflow-hidden">
            <div className={`h-full ${color} transition-all duration-300`} style={{ width: `${val}%` }} />
        </div>
    </div>
);

const NavItem = ({ icon, label, active = false, color = "text-slate-400", onClick }) => (
  <button onClick={onClick} className={`w-full flex items-center gap-4 px-3 py-3 rounded-xl transition-all relative group ${active ? 'bg-blue-600/10 text-blue-400 border border-blue-500/20 shadow-[inset_0_0_10px_rgba(59,130,246,0.1)]' : color + ' hover:bg-white/5 hover:text-white'}`}>
    {active && <div className="absolute left-0 w-1 h-6 bg-blue-500 rounded-r-full shadow-[0_0_15px_#3b82f6]" />}
    <div className={`${active ? 'scale-110' : 'group-hover:scale-110'} transition-transform`}>{icon}</div>
    <span className="font-black text-[10px] uppercase hidden md:block tracking-widest">{label}</span>
  </button>
);

const StatCard = ({ title, value, icon, sub }) => (
  <div className="bg-[#141822] border border-white/5 p-5 rounded-3xl hover:border-blue-500/30 transition-all hover:-translate-y-1 shadow-xl group">
    <div className="flex items-center justify-between mb-4">
        <div className="p-2.5 bg-white/5 rounded-2xl border border-white/5 group-hover:scale-110 transition-transform">{icon}</div>
        <div className="text-slate-600 group-hover:text-blue-500 transition-colors"><Activity size={12}/></div>
    </div>
    <h4 className="text-slate-500 text-[10px] font-black uppercase tracking-widest mb-1">{title}</h4>
    <div className="text-2xl font-black text-white tracking-tighter">{value}</div>
    <p className="text-slate-600 text-[10px] font-medium italic">{sub}</p>
  </div>
);

const SettingInput = ({ label, value }) => (
  <div className="flex justify-between items-center">
    <span className="text-[10px] font-black text-slate-400 uppercase tracking-widest">{label}</span>
    <input type="text" defaultValue={value} className="bg-white/5 border border-white/5 rounded-lg px-3 py-1.5 text-xs font-mono text-blue-400 text-right w-24 focus:outline-none focus:border-blue-500 transition-colors" />
  </div>
);

const SettingToggle = ({ label, active }) => (
  <div className="flex justify-between items-center">
    <span className="text-[10px] font-black text-slate-400 uppercase tracking-widest">{label}</span>
    <button className={`transition-colors outline-none ${active ? 'text-blue-500' : 'text-slate-600'}`}>
       {active ? <ToggleRight size={28} /> : <ToggleLeft size={28} />}
    </button>
  </div>
);

export default App;